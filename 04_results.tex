
\begin{figure*}[htbp]
\centerline{\includegraphics[scale=0.35]{NEAT_best.png}}
\caption{Best ANN generated by NEAT.}
\label{fig:NEAT_best}
\end{figure*}


\section{Results}
In this section we will present the results obtained with the two approaches and a
comparison between them and randomly piloted spaceships.

The evolution process stores at each run the best ANN or program generated with the
relative graphs in the folder 'runs' according to the specified approach. In this way it is
possible to relaunch them later and see through the graphical interface of the game how
they behave.

\subsection{NEAT}
The NEAT algorithm managed to evolve a ANN that can reach level 42 in the game with a
fitness of 1114 after about 160 generations. The ANN is represented in Fig. \ref{fig:NEAT_best}. As we can
see the network is quite simple, with a small number of nodes and connections: it has just 10
hidden nodes and 63 enabled connections.

In Fig. \ref{fig:NEAT_fitness}, we can observe that the best fitness increases significantly in just a few particular
generations, whereas the average fitness does not grow significantly and stays under 200.
With this fitness trend, we can also notice that the speciation decreases significantly after 20
generations due to stagnation of a lot of species and just the 2 elitism species will survive
after about 60 generations as shown in Fig. \ref{fig:NEAT_speciation}.

A weak point of NEAT is that the generated ANN is not really interpretable and we cannot
understand why the network produces certain output values.


\begin{figure}[htbp]
\centerline{\includegraphics[scale=0.6]{NEAT_fitness.png}}
\caption{Fitness trend of the NEAT run that has generated the best ANN.}
\label{fig:NEAT_fitness}
\end{figure}


\begin{figure}[htbp]
\centerline{\includegraphics[scale=0.6]{NEAT_speciation.png}}
\caption{Speciation trend of the NEAT run that has generated the best ANN.}
\label{fig:NEAT_speciation}
\end{figure}


\subsection{GP}
The GP algorithm managed to evolve a tree-based program that can reach level 151 in the
game with a fitness of 4061 during the evolution process and level 194 with a fitness of 5212
without limiting the number of frames. The tree of the program is represented in Fig. \ref{fig:GP_best}. As
we can see the tree is quite complex, with 259 nodes and a depth of 10 (the maximum depth
allowed). In Fig. \ref{fig:GP_fitness}, we can observe that the best fitness improves a lot in the first 60
generations reaching the frame threshold; in the remaining generations, the best fitness
trend increases slightly, probably also due to this limitation to the number of frames. The
average fitness trend is smoother and follows the best trend with a continuous increase: it
reaches about 3000 fitness with a large variance (over 1000).

A weak point of GP is that the generated tree is a bit complex and can be simplified a lot,
e.g. simplifying some 'if\_then\_else' statements with boolean values directly taken from the
terminal set ('true' or 'false') as conditions.

\begin{figure*}[htbp]
\centerline{\includegraphics[scale=0.155]{GP_best.pdf}}
\caption{Best tree-based program generated by GP.}
\label{fig:GP_best}
\end{figure*}

\begin{figure}[htbp]
\centerline{\includegraphics[scale=0.6]{GP_fitness.png}}
\caption{Fitness trend of the GP run that has generated the best program.}
\label{fig:GP_fitness}
\end{figure}



\subsection{Comparison}
With both techniques, we managed to find a program that is able to play the game well,
learning to fire almost always to hit enemies while dodging their lasers.

GP demonstrated to have a bigger potential considering our scenario: thanks to the
tree-structure and the functions provided, it is able to learn more complex strategies
reaching level 194, much more than the best evolved ANN. NEAT, instead, struggles to
evolve the network reaching in the best only level 42. NEAT is probably more suitable for
different tasks when a program would not be the best option or even it would be impossible
to build.

Moreover, a tree with a limited size can be more interpretable than a ANN and we can easily
provide an explanation for what the agent is doing.

Observing the agent in action we can say that: both move quite smoother, even though
neither of them is human-like, GP looks smarter with respect to NEAT. In fact, GP has a
tendency to stay in the middle of the playing area dodging all the lasers, while NEAT tends to
remain in the corners.

Across multiple runs, NEAT seems to obtain more stable results than GP that only a few
times manages to reach very good results as shown in Fig. \ref{fig:boxplots}. Both the techniques are
pretty good and much better than a randomly piloted spaceship that on average is just able
to reach level 3.


% TODO: fix captions
\begin{figure*}
    \centering
    \begin{subfigure}[b]{0.3\textwidth}
        \centering
        \includegraphics[width=\textwidth]{NEAT_Boxplot.png}
        \caption{NEAT boxplot}
    \end{subfigure}
    \hfill
    \begin{subfigure}[b]{0.3\textwidth}
        \centering
        \includegraphics[width=\textwidth]{GP_Boxplot.png}
        \caption{GP boxplot}
    \end{subfigure}
    \hfill
    \begin{subfigure}[b]{0.3\textwidth}
        \centering
        \includegraphics[width=\textwidth]{Random_Boxplot.png}
        \caption{Random boxplot}
    \end{subfigure}
       \caption{Comparison between boxplots of NEAT, GP and randomly piloted spaceships.}
       \label{fig:boxplots}
\end{figure*}